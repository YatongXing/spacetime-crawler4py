<!-- URL: https://grape.ics.uci.edu/wiki/public/wiki/cs222-2018-fall-command-line-interface -->

<!DOCTYPE html>
<html lang="en-US">   <head>
    <!-- # block head (placeholder in theme.html) -->
        <!-- # block head (content inherited from layout.html) -->
    <title>
      cs222-2018-fall-command-line-interface     – Public

    </title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!--[if IE]><script>
        if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
        </script><![endif]-->

    <link rel="start"  href="/wiki/public/wiki" />
    <link rel="search"  href="/wiki/public/search" />
    <link rel="help"  href="/wiki/public/wiki/TracGuide" />
    <link rel="stylesheet"  href="/wiki/public/chrome/common/css/trac.css" type="text/css" />
    <link rel="stylesheet"  href="/wiki/public/chrome/common/css/wiki.css" type="text/css" />
    <link rel="icon"  href="/wiki/public/chrome/site/favicon.ico" type="image/x-icon" />
    <link rel="alternate"  href="/wiki/public/wiki/cs222-2018-fall-command-line-interface?format=txt" title="Plain Text" type="text/x-trac-wiki" />
    <noscript>
      <style>
        .trac-noscript { display: none !important }
      </style>     </noscript>
    <script src="/wiki/public/chrome/common/js/jquery.js"></script>
    <script src="/wiki/public/chrome/common/js/babel.js"></script>
    <script src="/wiki/public/chrome/common/js/trac.js"></script>
    <script src="/wiki/public/chrome/common/js/search.js"></script>
    <script src="/wiki/public/chrome/common/js/folding.js"></script>
    <script src="/wiki/public/chrome/common/js/wiki.js"></script>
    <script>
      jQuery(function($) {
        $(".trac-autofocus").focus();
        $(".trac-target-new").attr("target", "_blank");
        if ($.ui) { /* is jquery-ui added? */
          $(".trac-datepicker:not([readonly])")
            .prop("autocomplete", "off").datepicker();
          // Input current date when today is pressed.
          var _goToToday = $.datepicker._gotoToday;
          $.datepicker._gotoToday = function(id) {
            _goToToday.call(this, id);
            this._selectDate(id)
          };
          $(".trac-datetimepicker:not([readonly])")
            .prop("autocomplete", "off").datetimepicker();
          $("#main").addClass("trac-nodatetimehint");
        }
        $(".trac-disable").disableSubmit(".trac-disable-determinant");
        setTimeout(function() { $(".trac-scroll").scrollToTop() }, 1);
        $(".trac-disable-on-submit").disableOnSubmit();
      });
    </script>
    <!--   # include 'site_head.html' (layout.html) -->
    <!--   end of site_head.html -->
    <!-- # endblock head (content inherited from layout.html) -->


    <script>
      jQuery(function($) {
        wikiColumn($("#wikipage"));
      });
    </script>
    <!-- # endblock head (placeholder in theme.html) -->
  </head> 
  <body>
    <!-- # block body (content inherited from theme.html) -->
    <!--   # include 'site_header.html' (theme.html) -->
    <!--   end of site_header.html -->

    <div id="banner">
      <div id="header">
        <a id="logo"
           href="http://www.ics.uci.edu/">
          <img  alt="ICS Logo" height="67" src="/wiki/public/chrome/site/ics.jpg" width="128" /></a>


      </div>
      <form id="search" action="/wiki/public/search" method="get">
      </form>
          <div id="metanav" class="nav">
      <ul><li  class="first"><a href="/wiki/public/login">Login</a></li><li ><a href="/wiki/public/prefs">Preferences</a></li><li ><a href="/wiki/public/about">About Trac</a></li><li  class="last"><a href="/wiki/public/register">Register</a></li></ul>
    </div>

    </div>
        <div id="mainnav" class="nav">
    </div>


    <div id="main"
         >

<div id="pagepath" class="noprint">
<a class="pathentry first" title="View WikiStart"
   href="/wiki/public/wiki">wiki:</a><a href="/wiki/public/wiki/cs222-2018-fall-command-line-interface"
     title="View cs222-2018-fall-command-line-interface"
     class="pathentry">cs222-2018-fall-command-line-interface</a></div>      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
        <ul>
          <li  class="first last"><a href="/wiki/public/wiki/cs222-2018-fall-command-line-interface?action=history">History</a></li>
        </ul>
        <hr />
      </div>

      

      

      <!-- # block content (placeholder in theme.html) -->
    <div id="content" class="wiki narrow">

      <div class="wikipage searchable">
        <div id="wikipage" class="trac-content borderless"><div class="wikipage" style="background-color:rgb(237,222,222)"><p>
</p><div class="wiki-toc">
<ol>
  <li>
    <a href="#CommandLineInterfaceInterpreterforProject4">Command Line Interface Interpreter for Project4</a>
    <ol>
      <li>
        <a href="#Introduction">Introduction</a>
      </li>
      <li>
        <a href="#SupportedCommands">Supported Commands</a>
      </li>
      <li>
        <a href="#CommandExamples">Command Examples</a>
      </li>
      <li>
        <a href="#GettingandUsingCommandLineInterface">Getting and Using Command Line Interface</a>
      </li>
      <li>
        <a href="#Acknowledgement">Acknowledgement</a>
      </li>
    </ol>
  </li>
</ol>
</div><p>
</p>
<h1 class="section" id="CommandLineInterfaceInterpreterforProject4">Command Line Interface Interpreter for Project4</h1>
<p>
<br />
</p>
<h2 class="section" id="Introduction">Introduction</h2>
<p>
Command Line Interface (CLI) takes a SQL-like command and executes that command. 
CLI is laid on top of the Relation Manager (RM) and Query Engine (QE) layers in Project 4 so that each command is executed via the public methods of the RM and/or QE layers.
</p>
<h2 class="section" id="SupportedCommands">Supported Commands</h2>
<p>
The interpreter supports the following commands. 
</p>
<pre class="wiki">create catalog
create table &lt;tableName&gt; (col1 = &lt;type&gt;, col2 = &lt;type&gt;, ...)
    &lt;type&gt; = int | real | &lt;varchar&gt;
    &lt;varchar&gt; = "varchar(" &lt;length&gt; ")"

create index &lt;columnName&gt; on &lt;tableName&gt;

drop catalog
drop table &lt;tableName&gt;
drop index &lt;indexName&gt; on &lt;tableName&gt;
drop attribute &lt;attributeName&gt; from &lt;tableName&gt;

insert into &lt;tableName&gt; tuple(col1 = &lt;value1&gt;, col2 = &lt;value2&gt;, ...)

SELECT &lt;query&gt;
&lt;query&gt; = 
    PROJECT &lt;query&gt; GET "[" &lt;attrs&gt; "]"
    FILTER &lt;query&gt; WHERE &lt;attr&gt; &lt;op&gt; &lt;value&gt;
    BNLJOIN &lt;query&gt;, &lt;query&gt; WHERE &lt;attr&gt; &lt;op&gt; &lt;attr&gt; PAGES(&lt;numPages&gt;)
    INLJOIN &lt;query&gt;, &lt;query&gt; WHERE &lt;attr&gt; &lt;op&gt; &lt;attr&gt;)
    GHJOIN &lt;query&gt;, &lt;query&gt; WHERE &lt;attr&gt; &lt;op&gt; &lt;attr&gt; PARTITIONS(&lt;numPartitions&gt;)
    AGG &lt;query&gt; [ GROUPBY(&lt;attr&gt;) ] GET &lt;agg-op&gt;(&lt;attr&gt;)
    IDXSCAN &lt;query&gt; &lt;attr&gt; &lt;op&gt; &lt;value&gt;
    TBLSCAN &lt;query&gt;
    &lt;tableName&gt;

&lt;agg-op&gt; = MIN | MAX | SUM | AVG | COUNT
&lt;op&gt; = &lt; | &gt; | = | != | &gt;= | &lt;= | NOOP
&lt;attrs&gt; = &lt;attr&gt; { "," &lt;attr&gt; }
&lt;numPartitions&gt; = is a number bigger than 0
&lt;numPages&gt; = is a number bigger than 0

print &lt;tableName&gt;
print attributes &lt;tableName&gt;
print index &lt;attributeName&gt; on &lt;tableName&gt;

load &lt;tableName&gt; &lt;fileName&gt;: loads the file which is in data/ folder.
help &lt;commandName&gt;
help
quit | exit
</pre><p>
<strong>Note:</strong> All commands are case-insensitive. However, all user defined strings such as table names, attribute names etc. are case-sensitive.
</p>
<h2 class="section" id="CommandExamples">Command Examples</h2>
<p>
When you first execute CLI, you need to create the system catalog using the following command. Once the catalog is created, you don't need to execute this command again.
</p>
<pre class="wiki">create catalog
</pre><p>
You can create a table and insert a record using the following commands:
</p>
<pre class="wiki">create table Employee EmpName = varchar(30), Age = int, Height = real, Salary = int
insert into Employee tuple(EmpName = sky, Age = 22, Height = 6.1, Salary = 13291)
</pre><p>
Also, CLI supports a load command that allows users to load records in a file to an existing table.
The following screenshot shows how to load records from a file, employee_5 to a table, tbl_employee, and print all records in the table.
Furthermore, it also shows how to use SELECT command with FILTER iterator.
</p>
<pre class="wiki">&gt;&gt;&gt; create table tbl_employee EmpName = varchar(30), Age = int, Height = real, Salary = int
&gt;&gt;&gt; load tbl_employee employee_5
&gt;&gt;&gt; print tbl_employee
EmpName           |  Age  |  Height    |  Salary  |  
===================================================
Anettea Belote    |  67   |  6.400000  |  75000   |  
Zina Legleiter    |  45   |  6.300000  |  150000  |  
Rena Broadus      |  68   |  5.900000  |  250000  |  
Lorriane Shimmin  |  49   |  6.600000  |  400000  |  
Elvira Binns      |  36   |  5.600000  |  200000  |  
&gt;&gt;&gt; SELECT FILTER tbl_employee WHERE Age = 45
tbl_employee.EmpName  |  tbl_employee.Age  |  tbl_employee.Height  |  tbl_employee.Salary  |  
============================================================================================
Zina Legleiter        |  45                |  6.300000             |  150000               |  
</pre><p>
<strong>Note</strong> that there are a set of dataset files under codebase/data/ directory, which are used for example programs, "cli_example_01.cc" under codebase/cli directory (and can be used for your own examples.)
The example program contains 21 cases each of which executes a set of CLI commands.
Those example cases provide more comprehensive usage of all CLI commands.
</p>
<h2 class="section" id="GettingandUsingCommandLineInterface">Getting and Using Command Line Interface</h2>
<p>
The codebase has the following source tree.
</p>
<pre class="wiki">codebase/
├── cli
│   ├── cli.cc
│   ├── cli.h
│   ├── cli_example_XX.cc
│   ├── makefile
│   └── start.cc
├── data
│   ├── ages_90
│   ├── employee_5
│   ├── employee_50
│   └── salary_5
├── ix
│   ├── ix.cc
│   ├── ix.h
│   ├── ixtestX.cc
│   ├── ixtest_extra_X.cc
│   ├── ixtest_util.h
│   └── makefile
├── makefile.inc
├── qe
│   ├── makefile
│   ├── qe.cc
│   ├── qetestX.cc
│   ├── qetest_util.h
│   └── qe.h
├── rbf
│   ├── makefile
│   ├── pfm.cc
│   ├── pfm.h
│   ├── rbfm.cc
│   ├── rbfm.h
│   └── rbftestX.cc
├── readme.txt
├── rm
│   ├── makefile
│   ├── rm.cc
│   ├── rm.h
│   ├── rmtest_XX.cc
│   ├── rmtest_create_tables.cc
│   ├── rmtest_delete_tables.cc
│   ├── rmtest_extra_X.cc
│   └── test_util.h
└── shared.h
</pre><p>
<strong>Note</strong> that the folder, codebase/data/ has csv files that contain a set of records, which can be used for your own checking purpose. 
<br />
Also, the data folder is a folder that CLI program searches for files specified in "load" commands. <br />
</p>
<p>
Goto cli folder and type the following commands
</p>
<pre class="wiki">make clean; make; ./start
</pre><p>
if you see the following outputs (the folder hierarchy will be different), you are good to go to the next step.
</p>
<pre class="wiki">************************
SecSQL CLI started
Enjoy!
&gt;&gt;&gt; 
</pre><p>
Now, put all files that you implemented(and will implement in Project4) to the corresponding folders in the above source tree. 
Then, if you type again the same command in the cli folder, you can start playing by typing <strong>"help"</strong>.
</p>
<h2 class="section" id="Acknowledgement">Acknowledgement</h2>
<p>
The CLI layer was originally written by the following three students from the previous CS222 course project.   
</p>
<ul><li>Sky Faber
</li><li>Cesar Ghali
</li><li>Ekin Oguz
</li></ul><p>
We really appreciate their efforts. We also acknowledge the efforts of Sattam Alsubaiee, Young-Seok Kim, Hotham Altwaijry, Jianfeng Jia, and Taewoo Kim who updated the the CLI layer in the previous quarters. 
</p>
</div></div>
        <div class="trac-modifiedby">
          <span>
            <a href="/wiki/public/wiki/cs222-2018-fall-command-line-interface?action=diff&amp;version=3" title="Version 3 by Chen Luo">Last modified</a>
 <a class="timeline" href="/wiki/public/timeline?from=2018-12-05T09%3A46%3A30-08%3A00&amp;precision=second" title="See timeline at Dec 5, 2018, 9:46:30 AM">7 years ago</a>          </span>
          <span class="trac-print">
            Last modified on Dec 5, 2018, 9:46:30 AM
          </span>
        </div>
      </div>





<div class="trac-help">
  <strong>Note:</strong>
 See   <a href="/wiki/public/wiki/TracWiki">TracWiki</a>
 for help on using the wiki.
</div>
    </div>
        <!-- # block content (content inherited from layout.html) -->
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first last">
          <a rel="nofollow" href="/wiki/public/wiki/cs222-2018-fall-command-line-interface?format=txt"
              class="">
            Plain Text</a>
        </li>
      </ul>
    </div>
    <!-- # endblock content (content inherited from layout.html) -->

      <!-- # endblock content (placeholder in theme.html) -->
    </div>

    <div id="footer"><hr/>
      <a id="tracpowered" href="https://trac.edgewall.org/"
         ><img src="/wiki/public/chrome/common/trac_logo_mini.png" height="30"
               width="107" alt="Trac Powered"/></a>
      <p class="left">
Powered by         <a href="/wiki/public/about"><strong>Trac 1.5.3</strong></a>
        <br />
 By         <a href="http://www.edgewall.org/">Edgewall Software</a>
.      </p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
    <!--   # include 'site_footer.html' (theme.html) -->
    <!--   end of site_footer.html -->
    <!-- # endblock body (content inherited from theme.html) -->
  </body> </html>